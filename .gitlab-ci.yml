# This file is a template, and might need editing before it works on your project.
# Official language image. Look for the different tagged releases at:
# https://hub.docker.com/r/library/python/tags/
image: python:latest

stages:
    - test
    - deploy

test:
    stage : test
    script:
    - echo $PWD # print the cwd so I know the tests are running in the right place
    - pip install pytest
    - pytest


deploy:
    stage: deploy
    script:
        - python -V  # Print out python version for debugging
        - pip install poetry
        - poetry config virtualenvs.create false
        - poetry install 
        - poetry publish --build --dry-run -u $PYPI_UNAME -p $PYPI_PASS
